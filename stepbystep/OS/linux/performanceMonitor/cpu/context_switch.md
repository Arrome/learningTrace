# CPU 上下文切换

### 进程上下文切换
1. 进程时间片耗尽，被挂起
2. 保证高优先级运行，挂起低优先级进程
3. sleep 方法主动挂起
4. 发生硬件中断，cpu进程被中断挂起
5. 系统资源不足（比如内存不足）进程被挂起

### 线程上下文切换



### 中断上下文切换
不涉及进程用户态。即使一个正处于用户态的进程，也不需要保存和恢复这个进程的用户态资源（虚拟内存、全局变量）
中断上下文，只包括内核态中断服务程序执行必须状态（cpu寄存器，内核堆栈，硬件中断参数等）
对同一个cpu，中断程序比进程拥有更高优先级


### 自愿上下文切换
进程无法获取所需资源，导致上下文切换（I/O、内存资源不足时）

### 非自愿上下文切换
大量进程抢占CPU，容易导致