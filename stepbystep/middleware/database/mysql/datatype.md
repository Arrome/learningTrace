#数据类型选择

基本原则：存储引擎确定合适数据类型

* MyISAM数据表，最好使用固定长度的数据列
* Innodb数据表，最好使用VARCHAR，<br>
    最小化数据行存储总量和磁盘I/O,
    内部存储格式没有区分固定长度和可变长度(所有数据行都使用指向数据列值的头指针)

char与varchar
--------------
相同点：<br>
1. 两者类型类似
2. 存储或检索过程中不进行大小写转换

不同点：
1. 保存和检索方式不同，CHAR列检索时删除了尾部的空格<br>
2. 最大长度和是否尾部空格被保留也不同

| 值  | CHAR(4)| 存储需求 | VARCHAR(4) | 存储需求 |
|------|---------  |------  |----|-----    |
| ''   |'&nbsp;&nbsp;&nbsp;&nbsp;' |4个字节  |'' |  1个字节 |
| 'ab' |'ab&nbsp;&nbsp;'|4个字节|'ab&nbsp;'|3个字节|
|'abcd'|'abcd'|4个字节|'abcd'|5个字节|
|'abcdefgh'|'abcd'|4个字节|'abcd'|5个字节|

最后一行只适用不使用严格模式时，严格模式下超过列长度的值不保存且报错

text和blob
------------
1. 存在问题：执行大量删除或更新操作时，由于数据表记录长度不同会造成碎片<br>
&nbsp;&nbsp;建议定期对这类表碎片整理：使用 OPTIMIZE TABLE 功能

2. 避免检索大型BLOB或TEXT值，会导致网络上传输大量的值

3. 建议做法：把BLOB或TEXT列分离到单独表中<br>
    （某些环境中，把这些数据列移动到第二张数据表中，原数据表中数据列转换为固定长度数据行格式）<br>
    减少主表碎片
4. 建议做法：合成索引<br>
    根据其列内容建立散列值，并存储在单独数据列中，通过检索散列值找到数据行<br>
    只能适用于精确匹配（散列值对<或>=等范围搜索符没有用）
    散列值可通过MD5()，SHA1()，CRC32()等<br>
    注意：散列算法生成的字符串带尾部空格，不要存储在CHAR或VARCHAR列中，会受尾部空格去除影响

浮点数(float,double)与定点数(decimal)
----------------
浮点数：
1. 优点：在长度一定，浮点数比定点数表示更大数据范围
2. 缺点：会引起精度问题

注意：
1. 对货币等精度敏感数据，应该定点数存储
2. 尽量避免浮点数比较，注意误差问题
3. 注意浮点数一些特殊值处理 